<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Test conexiÃ³n multiplayer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, sans-serif; background: #0f1220; color: #eaeaf0; padding: 24px; }
    .card { max-width: 520px; margin: auto; padding: 20px; border-radius: 12px; background: #171a2b; }
    button { padding: 10px 14px; border-radius: 8px; border: 0; cursor: pointer; }
    .ok { color: #6ee7b7; }
    .err { color: #fca5a5; }
    .log { font-family: ui-monospace, monospace; background: #0b0d18; padding: 10px; border-radius: 8px; height: 140px; overflow: auto; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Test WebSocket (WSS)</h1>
    <p>Esto comprueba si tu red permite conexiones por <b>WSS (443)</b>.</p>
    <button id="btn">Conectar</button>
    <p id="status">Estado: <b>desconectado</b></p>
    <div class="log" id="log"></div>
  </div>

  <script>
    const btn = document.getElementById('btn');
    const statusEl = document.getElementById('status');
    const logEl = document.getElementById('log');
    let ws;

    function log(msg) {
      logEl.innerHTML += msg + '<br>';
      logEl.scrollTop = logEl.scrollHeight;
    }

    btn.onclick = () => {
      if (ws && ws.readyState === WebSocket.OPEN) {
        ws.close();
        return;
      }

      // ðŸ‘‡ PON AQUÃ la URL WSS de tu servidor
      const URL = "wss://TU-SERVIDOR-AQUI.onrender.com";

      log("Conectando a " + URL + " ...");
      ws = new WebSocket(URL);

      ws.onopen = () => {
        statusEl.innerHTML = 'Estado: <b class="ok">conectado</b>';
        log("âœ… Conectado!");
        ws.send("hola desde el navegador");
      };

      ws.onmessage = (e) => {
        log("ðŸ“© Servidor dice: " + e.data);
      };

      ws.onerror = () => {
        statusEl.innerHTML = 'Estado: <b class="err">error de conexiÃ³n</b>';
        log("âŒ Error de conexiÃ³n");
      };

      ws.onclose = () => {
        statusEl.innerHTML = 'Estado: <b>desconectado</b>';
        log("ðŸ”Œ ConexiÃ³n cerrada");
      };
    };
  </script>
</body>
</html>
